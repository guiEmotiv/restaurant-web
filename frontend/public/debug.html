<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Logs - Restaurant Web</title>
    <style>
        body { font-family: monospace; margin: 20px; background: #1a1a1a; color: #fff; }
        .log-entry { margin: 10px 0; padding: 10px; background: #2a2a2a; border-radius: 4px; }
        .timestamp { color: #888; }
        .message { color: #4CAF50; font-weight: bold; }
        .data { color: #FFD700; margin-left: 20px; }
        .clear-btn { background: #f44336; color: white; border: none; padding: 10px 20px; margin: 10px 0; cursor: pointer; border-radius: 4px; }
        .refresh-btn { background: #2196F3; color: white; border: none; padding: 10px 20px; margin: 10px 0; cursor: pointer; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>üîç Restaurant Web - Debug Logs</h1>
    
    <button class="refresh-btn" onclick="loadLogs()">üîÑ Refresh Logs</button>
    <button class="clear-btn" onclick="clearLogs()">üóëÔ∏è Clear Logs</button>
    
    <div id="app-logs">
        <h2>üì± App Logs</h2>
        <div id="app-logs-content"></div>
    </div>
    
    <div id="auth-logs">
        <h2>üîê Auth Logs</h2>
        <div id="auth-logs-content"></div>
    </div>
    
    <div id="api-logs">
        <h2>üì° API Logs</h2>
        <div id="api-logs-content"></div>
    </div>

    <script>
        function loadLogs() {
            // Load app logs
            const appLogs = JSON.parse(sessionStorage.getItem('app-debug-logs') || '[]');
            const appContent = document.getElementById('app-logs-content');
            appContent.innerHTML = '';
            
            appLogs.forEach(log => {
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                entry.innerHTML = `
                    <div class="timestamp">${log.timestamp}</div>
                    <div class="message">${log.message}</div>
                    <div class="data">${JSON.stringify(log.data, null, 2)}</div>
                `;
                appContent.appendChild(entry);
            });
            
            // Load auth logs
            const authLogs = JSON.parse(sessionStorage.getItem('auth-debug-logs') || '[]');
            const authContent = document.getElementById('auth-logs-content');
            authContent.innerHTML = '';
            
            authLogs.forEach(log => {
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                entry.innerHTML = `
                    <div class="timestamp">${log.timestamp}</div>
                    <div class="message">${log.message}</div>
                    <div class="data">${JSON.stringify(log.data, null, 2)}</div>
                `;
                authContent.appendChild(entry);
            });
            
            // Load API logs
            const apiLogs = JSON.parse(sessionStorage.getItem('api-debug-logs') || '[]');
            const apiContent = document.getElementById('api-logs-content');
            apiContent.innerHTML = '';
            
            apiLogs.forEach(log => {
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                const statusColor = log.success ? '#4CAF50' : '#f44336';
                entry.innerHTML = `
                    <div class="timestamp">${log.timestamp}</div>
                    <div class="message" style="color: ${statusColor}">[${log.type.toUpperCase()}] ${log.method} ${log.status}</div>
                    <div class="data">${log.url}</div>
                    ${log.message ? `<div class="data" style="color: #f44336;">${log.message}</div>` : ''}
                    ${log.responseData ? `<div class="data">${JSON.stringify(log.responseData, null, 2)}</div>` : ''}
                `;
                apiContent.appendChild(entry);
            });
            
            if (appLogs.length === 0 && authLogs.length === 0 && apiLogs.length === 0) {
                document.body.innerHTML += '<p style="color: #888;">No debug logs found. Make sure to access the main app first to generate logs.</p>';
            }
        }
        
        function clearLogs() {
            sessionStorage.removeItem('app-debug-logs');
            sessionStorage.removeItem('auth-debug-logs');
            sessionStorage.removeItem('api-debug-logs');
            loadLogs();
        }
        
        // Auto-refresh every 2 seconds
        setInterval(loadLogs, 2000);
        
        // Load on page load
        loadLogs();
    </script>
</body>
</html>